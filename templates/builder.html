{%extends 'base.html'%} {%import 'partials/img.html' as img%} {%block custom_meta%}
<meta content="{{keywords|join(',')}}" name="keywords" />

<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta content="{{page.intro}}" name="description" />
<title>{{page.head}}</title>
<meta property="og:url" content="http://apps.dallasnews.com/meme-generator/builder/{{page.id}}" />
<meta property="og:title" content="{{page.head}}" />
<meta property="og:description" content="{{page.intro}}" name="description" />
<meta property="og:image" content="{{imgURL}}" />
<meta property="og:image:height" content="630" />
<meta property="og:image:width" content="1200" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="{{page.twitter}}" />
<meta name="twitter:creator" content="{{page.twitter}}" />

<meta name="liveFyreID" content="{{page.date}}" />

<meta name="parsely-page" id='parsely-page' content='{"title": "{{page.head}}", "link": "http://apps.dallasnews.com/meme-generator/builder/{{page.id}}", "image_url": "{{imgURL}}", "type": "post", "post_id": "{{page.date}}", "pub_date": "{{publishDate}}", "section": "{{page.desk}}", "author": ["{{page.author}}"], "tags": ["{{keywords|join('
				"," ')|safe}}"]}' />

<meta property="og:keywords" content="{{keywords|join(',')}}" />

<meta name="news_keywords" content="{{keywords|join(',')}}" /> {%endblock%} {%block custom_head%} {%endblock%} {%block ad%}
<script type="text/javascript" src="http://www.googletagservices.com/tag/js/gpt.js"></script>
<script type="text/javascript">
	DFP_networkId = "11222444";
	var DFPSlotSizes = [];
	if (jQuery(window).width() < 768) {
		var DFP_sitepage = "m.DMN/interactives";
		DFPSlotSizes = [320, 50]
		var adSlot0 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionTop");
		adSlot0.setTargeting("position", "x01");
		adSlot0.addService(googletag.pubads());

		/*
		var adSlot1 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionMiddle");
		adSlot1.setTargeting("position", "x02");
		adSlot1.addService(googletag.pubads());
		*/

		/*
		var adSlot2 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionBottom");
		adSlot2.setTargeting("position", "x03");
		adSlot2.addService(googletag.pubads());
		*/
	} else {
		var DFP_sitepage = "DMN/interactives";
		DFPSlotSizes = [728, 90]
		var adSlot0 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionTop");
		adSlot0.setTargeting("position", "Top");
		adSlot0.addService(googletag.pubads());

		/*
		var adSlot1 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionMiddle");
		adSlot1.setTargeting("position", "Top");
		adSlot1.addService(googletag.pubads());
		*/

		/*
		var adSlot2 = googletag.defineSlot('/' + DFP_networkId + '/' + DFP_sitepage, DFPSlotSizes, "dfpAdPositionBottom");
		adSlot2.setTargeting("position", "Top");
		adSlot2.addService(googletag.pubads());
		*/
	}
</script>
<script type="text/javascript">
	googletag.pubads().enableSingleRequest();
	googletag.pubads().enableSyncRendering();
	googletag.enableServices();
</script>


<link rel="stylesheet" type="text/css" href="../css/builder.css" />
<script type="text/javascript" src="../js/builder.js"></script>

{%endblock%} {%block content%}

<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '375853655843043',
            xfbml: true,
            version: 'v2.3'
        });
    };
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<aside id="dataStamp">
	<span class="pageID">{{page.id}}</span>
	<span class="pageTags">{{page.tags}}</span>
	<span class="pageDate">{{page.date}}</span>
	<span class="pageAuthor">{{page.author}}</span>
	<span class="pageHead">{{page.head}}</span>
	<span class="pageIntro">{{page.intro}}</span>
	<span class="pageDesk">{{page.desk}}</span>
	<span class="pageImages">{{page.images}}</span>
	<span class="pageTwitter">{{page.twitter}}</span>
	<span class="pageHashtag">{{page.hashtag}}</span>
	<span class="pageMention">{{page.mention}}</span>
</aside>


<section class="content-well clearfix">

	<header id="story-head">
		<h3>MEME MAKER</h3>
		<h1>{{page.head}}</h1>
		<h2>{{page.intro}}</h2>
	</header>
	<!-- end storyHead -->

	<div class="byline-block">
		<p>By <a target="_blank" href="mailto:emailaddresshere">{{page.author}}</a> | Staff Writer</p>
		<p class="dateLocation"></p>
		<!-- <p>Updated Month, Date, Year</p> -->
	</div>
	<!-- end bylineBlock -->

	<div class="shareComments shareCommentsTop">
		<ul id="share-bar1" class="width-auto-hack"></ul>
	</div>
	<!-- end shareComments -->

	<div class="meme-container">

		<!--
 		    PART 1.
 		    Select an image
 	    -->
		<p class="meme-instructions">
			<span class="number">1</span> Select an image to use for your meme.</p>
		<div class="section-container clearFix" id="thumbsBox">

		</div>

		<!--
 		    PART 2.
 		    Display preview
 	    -->
		<div class="section-container clearFix">
			<p class="meme-instructions"><span class="number">2</span> Add your message and adjust the typeâ€™s size.</p>
			<div class="sizing" id="topSizing">
				<img class="minus" src="../images/_minus.svg" height="18px" />Text size<img class="plus" src="../images/_plus.svg" height="18px" /></div>

			<div id="meme-container">
				<input id="topLineText" type="text" placeholder="Top text">
				<input id="bottomLineText" type="text" placeholder="Bottom text">
				<canvas id="canvas"></canvas>
			</div>

			<div class="sizing" id="bottomSizing"><img class="minus" src="../images/_minus.svg" height="18px" />Text size<img class="plus" src="../images/_plus.svg" height="18px" /></div>

			<div class="controls">
				<input type="file" id="file" />
				<button id="saveBtn">Save</button>
			</div>

		</div>

		<!--
 		    PART 3.
 		    Build and share
 	    -->
		<div class="section-container clearFix">
			<p class="meme-instructions"><span class="number">3</span> Build and share your meme.</p>
			<div class="nav clearFix">
				<div class="sectionNav" id="build">Build meme</div>
				<a class="sectionNav" id="save">Save</a>
				<div class="sectionNav socialShare" id="facebookButton">
					<span class="helper"></span>
					<img src="../images/_facebook.png" />Facebook
				</div>
			</div>

		</div>

		<!--
 		    PART 4.
 		    Build and share
 	    -->
		<div class="section-container clearFix" id="reload-section">
			<p class="meme-instructions"><span class="number">4</span> Build another meme.</p>
			<div class="nav clearFix">
				<div class="sectionNav" id="reload">Build another</div>
			</div>
		</div>


		<canvas id="tgt"></canvas>

		{%include "adblock1.html" %}

		<!--
      use the above include with adblock2.html and adblock3.html to place adblocks 2 and 3, then delete this comment.
      it won't self-destruct, but it is cleaner
    -->

		<p class="twitter-tag">Follow writer name on Twitter at <a href="http://www.twitter.com/{{page.desk}}">{{page.twitter}}.</a></p>

		<!-- <section class="credits clearfix">
			<p><strong>Author:</strong> <a href="mailto:emailaddress">Name</a></p>
			<p><strong>Editor:</strong> <a href="mailto:emailaddress">Name</a></p>
			<p><strong>Copy Editor:</strong> <a href="mailto:emailaddress">Name</a></p>
			<p><strong>Photos:</strong> <a href="mailto:emailaddress">Name</a></p>
			<p><strong>Graphics:</strong> <a href="mailto:emailaddress">Name</a></p>
			<p><strong>Designer:</strong> <a href="mailto:emailaddress">Name</a></p>
		</section> -->
		<!-- end credits -->

    <!-- <section class="more clearfix">
      <h5>More from The Dallas Morning News</h5>
      <a class="clearfix" href="#">
        <img src="../images/_opinion.jpg" alt="Dallas Morning News opinion page">
        <h6>Opinion</h6>
        <p>These are temporary promos until we figure out what else to put here.</p>
      </a>
      <a class="clearfix" href="#">
        <img src="../images/_sportsday.jpg" alt="SportsDay DFW">
        <h6>SportsDayDFW</h6>
        <p>These are temporary promos until we figure out what else to put here.</p>
      </a>
      <a class="clearfix" href="#">
        <img src="../images/_guidelive.jpg" alt="GuideLive">
        <h6>GuideLive</h6>
        <p>These are temporary promos until we figure out what else to put here.</p>
      </a>
    </section> -->
    <!-- end more -->

		<div class="shareComments">
			<ul id="share-bar2" class="width-auto-hack"></ul>
			<div id="comments"></div>
		</div>
		<!-- end shareComments -->

</section>
<!-- end contentWell -->
{%endblock%} {%block custom_foot%}

<script type="text/javascript"></script>
{%endblock%} {%block custom_social_meta%}
<script type="text/javascript">
	var storyTitle = "{{page.head}} {{page.hashtag}} {{page.mention}}", // headline in tweet card
		storyURL = "http://apps.dallasnews.com/meme-generator/builder/{{page.id}}",
		leadText = "{{page.intro}}", //description in tweet card
		storyIMG = "{{imgURL}}",
		storyAuthor = "{{page.author}}",
		twitterTag = "{{page.twitter}}",
		comments = true,
		share = true;
	OAS_sitepage = 'apps.dallasnews.com/{{page.desk}}/{{page.section}}/';

	var images = "{{page.images}}";
	var epochDate = "{{page.date}}";

	var monthNames = ["January", "February", "March", "April", "May", "June",
		"July", "August", "September", "October", "November", "December"
	];

	var date = new Date(parseInt(epochDate));
	var month = monthNames[date.getMonth()];
	var year = date.getFullYear();
	var day = date.getDate();
	var dateString = month + " " + day + ", " + year;

	$(".dateLocation").html("Published " + dateString);
</script>
{%endblock%}
